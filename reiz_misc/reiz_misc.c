/********************************************************************************************************
 *  @file       reiz_misc.c
 *  @author     chenLei
 *  @version    v1.0.0
 *  @date       2019-04-02
 *  @site       xinMeiYuan.A41
 *  @brief      杂项功能函数源文件
 ********************************************************************************************************
 */

/* Includes ------------------------------------------------------------------------------------------ */
#include "reiz_misc.h"

/* Private define ------------------------------------------------------------------------------------ */
/* Private macro ------------------------------------------------------------------------------------- */
/* Private typedef ----------------------------------------------------------------------------------- */
/* Private variables --------------------------------------------------------------------------------- */
/* Exported variables -------------------------------------------------------------------------------- */
/* Private function prototypes ----------------------------------------------------------------------- */

/********************************************************************************************************
 *  @brief  搜索匹配内存块指定的十六进制串
 *  @param  pMem   - 搜索目标内存块指针
 *          memLen - 内存块大小
 *          pHex   - 被搜索的十六进制串指针
 *          hexLen - 十六进制串长度
 *  @return 0      - 未搜索到
 *          其他   - 搜索匹配成功的十六进制串首地址
 */
uint8_t *searchHexStrInMem ( uint8_t *pMem, uint16_t memLen, uint8_t *pHex, uint16_t hexLen ) {
    uint16_t matchBytes = 0;
    
    for (uint16_t i = 0, j = 0; i < memLen; i++) {
        if (*(pMem + i) == *(pHex + j)) {
            ++j;
            if (++matchBytes == hexLen) {
                return pMem + i - hexLen + 1;
            }
        } else {
            matchBytes = 0;
            j = 0;
        }
    }
    return (uint8_t *)0;
}

/****************************************** END OF FILE *************************************************
*********************************** (C) Copyright 2019 Medlinket ***************************************/
